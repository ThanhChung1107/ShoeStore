{% extends 'base.html' %}
{% load static %}
{% load humanize %}

{% block extra_css %}
<style>
    .orders-container {
        max-width: 1100px;
        margin: 40px auto;
        padding: 0 20px;
    }

    .page-title {
        text-align: center;
        margin-bottom: 40px;
        color: #2c3e50;
        font-weight: 300;
    }

    .orders-list {
        background: #fff;
        border-radius: 2px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.08);
        overflow: hidden;
    }

    .order-header {
        display: grid;
        grid-template-columns: 100px 300px 150px 200px 120px;
        gap: 20px;
        padding: 20px;
        background: #f8f9fa;
        border-bottom: 1px solid #e0e0e0;
        font-weight: 600;
        color: #2c3e50;
    }

    .order-item {
        display: grid;
        grid-template-columns: 100px 300px 150px 200px 120px;
        gap: 20px;
        padding: 20px;
        border-bottom: 1px solid #ecf0f1;
        align-items: center;
        transition: background-color 0.2s ease;
    }

    .order-item:hover {
        background-color: #f8f9fa;
    }

    .order-item:last-child {
        border-bottom: none;
    }

    .order-id {
        color: #2c3e50;
        font-weight: 500;
    }

    .order-date {
        color: #7f8c8d;
        font-size: 0.9em;
    }

    .order-total {
        color: #2c3e50;
        font-weight: 600;
    }

    .order-status {
        padding: 6px 12px;
        border-radius: 2px;
        font-size: 0.85em;
        font-weight: 500;
        text-transform: uppercase;
        text-align: center;
        width: 200px;
    }

    .status-paid {
        background-color: #d4edda;
        color: #155724;
    }

    .status-unpaid {
        background-color: #f8d7da;
        color: #721c24;
    }

    .view-order-btn {
        padding: 8px 16px;
        background: #2c3e50;
        color: white;
        text-decoration: none;
        border-radius: 2px;
        font-size: 0.9em;
        text-align: center;
        transition: background-color 0.2s ease;
    }

    .view-order-btn:hover {
        background: #34495e;
    }

    .empty-orders {
        text-align: center;
        padding: 60px 20px;
        color: #7f8c8d;
    }

    .empty-orders i {
        font-size: 3em;
        margin-bottom: 20px;
        color: #bdc3c7;
    }

    @media (max-width: 768px) {
        .order-header {
            display: none;
        }

        .order-item {
            grid-template-columns: 1fr;
            gap: 10px;
            text-align: center;
        }

        .view-order-btn {
            margin-top: 15px;
        }
    }
    .orders-scrollable {
    max-height: 500px; /* Chiều cao tối đa trước khi xuất hiện thanh cuộn */
    overflow-y: auto; /* Hiển thị thanh cuộn dọc khi cần */
    scrollbar-width: thin; /* Firefox */
}

/* Thiết kế thanh cuộn cho Webkit browsers (Chrome, Edge, Safari) */
.orders-scrollable::-webkit-scrollbar {
    width: 8px;
}

.orders-scrollable::-webkit-scrollbar-track {
    background: #f1f1f1;
    border-radius: 4px;
}

.orders-scrollable::-webkit-scrollbar-thumb {
    background: #c1c1c1;
    border-radius: 4px;
}

.orders-scrollable::-webkit-scrollbar-thumb:hover {
    background: #a8a8a8;
}

/* Đảm bảo các mục đơn hàng hiển thị đúng */
.order-item {
    display: grid;
    grid-template-columns: 1fr 1.5fr 1.5fr 1.5fr 1fr;
    gap: 15px;
    padding: 15px 20px;
    border-bottom: 1px solid #e9ecef;
    align-items: center;
}

.order-item:last-child {
    border-bottom: none;
}
</style>
{% endblock %}

{% block content %}
<div class="orders-container">
    <h1 class="page-title">Đơn Hàng Của Tôi</h1>

    {% if orders %}
    <div class="orders-list">
        <div class="order-header">
            <div>Mã ĐH</div>
            <div>Ngày đặt</div>
            <div>Tổng tiền</div>
            <div>Trạng thái</div>
            <div>Thao tác</div>
        </div>

         <div class="orders-scrollable">
            {% for order in orders %}
            <div class="order-item">
                <div class="order-id">#{{ order.id }}</div>
                <div class="order-date">{{ order.created_at|date:"d/m/Y H:i" }}</div>
                <div class="order-total">{{ order.total_price|floatformat:0|intcomma }}₫</div>
                <div class="order-status {% if order.status == 'paid' %}status-paid{% else %}status-unpaid{% endif %}">
                    {{ order.get_status_display }}
                </div>
                <a href="{% url 'order_detail' order.id %}" class="view-order-btn">
                    Xem chi tiết
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
    {% else %}
    <div class="empty-orders">
        <i class="fas fa-shopping-bag"></i>
        <h3>Bạn chưa có đơn hàng nào</h3>
        <p>Hãy khám phá các sản phẩm của chúng tôi và thực hiện đặt hàng đầu tiên!</p>
        <a href="{% url 'product' %}" class="view-order-btn" style="display: inline-block; margin-top: 20px;">
            Mua sắm ngay
        </a>
    </div>
    {% endif %}
</div>
{% endblock %}